var latlng = new google.maps.LatLng(37.780278, -122.414060)
var mapStyle = [
    {"featureType": "water","elementType": "geometry","stylers": [{ "hue": "#0066ff" },{ "lightness": -20 },{ "saturation": -33 },{ "gamma": 0.77 }]},
    {"featureType": "water","elementType": "labels","stylers": [{ "visibility": "off" }]},
    {"featureType": "poi.park","elementType": "geometry","stylers": [{ "hue": "#00ff00" },{ "lightness": 58 },{ "gamma": 0.3 },{ "saturation": 4 }]},
    {"featureType": "transit","stylers": [{ "visibility": "off" }]},
    {"featureType": "poi.business", "elementType": "labels", "stylers": [{ "visibility": "off" }]},
    {"featureType": "road","elementType": "geometry.stroke","stylers": [{ "visibility": "off" }]},
    {"featureType": "road.highway.controlled_access","stylers": [{ "visibility": "simplified" }]},
    {"featureType": "road.highway","elementType": "geometry","stylers": [{ "hue": "#ffbb00" },{ "saturation": -5 },{ "lightness": 47 }, { "gamma":.49 }]},
    {"featureType": "road.highway.controlled_access","elementType": "geometry","stylers": [{ "hue": "#ffbb00" },{ "saturation": -5 },{ "lightness": 47 }, { "gamma":1 }]},
    {"featureType": "road.highway.controlled_access","elementType": "labels","stylers": [{ "visibility": "off" }]},
    {"featureType": "poi.park","stylers": [{"visibility": "simplified"}]},
    {"featureType": "poi.school","stylers": [{"visibility": "simplified"}]},
    {"featureType": "administrative.neighborhood","stylers": [{"visibility": "off"}]},
];
var mapOptions = {
    zoom: 13,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    styles: mapStyle
};
var map = new google.maps.Map(document.getElementById("map-canvas"),
    mapOptions);

var routeLine = null;
var startMarker = null;

function render() {

    var stops = [[37.788861, -122.41158459999997], [37.788808, -122.411886], 
        [37.788924, -122.410967], [37.7890141, -122.410257], 
        [37.7885486, -122.4101645], [37.7880801, -122.4100713], 
        [37.7874277, -122.4099416], [37.7871475, -122.4098859], 
        [37.78667, -122.4097895], [37.7865096, -122.4097581], 
        [37.7862181, -122.4097011], [37.7852809, -122.4095147], 
        [37.7843568, -122.409331], [37.7844365, -122.4087108], 
        [37.7844381, -122.408699], [37.784463, -122.4085315], 
        [37.7840895, -122.4082082], [37.7843161, -122.4084769], 
        [37.7843338, -122.4084937], [37.7843853, -122.4085165], 
        [37.7839993, -122.4080907], [37.7835213, -122.4074948], 
        [37.7832877, -122.4071995], [37.7831569, -122.4070353], 
        [37.7827293, -122.4064956], [37.7823053, -122.4059611], 
        [37.7819275, -122.4054874], [37.7814932, -122.4049417], 
        [37.7808758, -122.4057232], [37.7797361, -122.4071627], 
        [37.7793122, -122.4066316], [37.7789407, -122.406166], 
        [37.7785107, -122.4056272], [37.7781618, -122.4060691], 
        [37.776931, -122.4045223], [37.7772779, -122.4040826], 
        [37.7767255, -122.4033895], [37.7760452, -122.4025378], 
        [37.7748144, -122.4009956], [37.7749092, -122.4008758], 
        [37.7748356, -122.4007198], [37.7744948, -122.4002909], 
        [37.7744488, -122.400349], [37.7743154, -122.4001794], 
        [37.7742804, -122.4001293], [37.7748305, -122.3994256], 
        [37.7759585, -122.3979976], [37.7753451, -122.3972279], 
        [37.7736238, -122.3994179], [37.7718661, -122.4015675], 
        [37.7721757, -122.4012433], [37.7722326, -122.4011825], 
        [37.7722916, -122.4011129], [37.7717998, -122.4016452], 
        [37.7700872, -122.4038348], [37.7701197, -122.4038074], 
        [37.7700509, -122.4038573], [37.770057, -122.4038988], 
        [37.7700555, -122.4039397], [37.7710296, -122.4051368], 
        [37.7709299, -122.4050084], [37.7701331, -122.4040149], 
        [37.7700966, -122.4039753], [37.7712739, -122.4054769], 
        [37.7706296, -122.4063127], [37.77007, -122.4069977], 
        [37.7695306, -122.4076423], [37.7704872, -122.4087495], 
        [37.7703448, -122.4086722], [37.7708243, -122.4091395], 
        [37.7720599, -122.410688], [37.7715867, -122.4112871], 
        [37.772073, -122.411897], [37.7728201, -122.4128343], 
        [37.77356, -122.413763], [37.774043, -122.414368], 
        [37.7744848, -122.4149212], [37.7748526, -122.4153843], 
        [37.7752773, -122.415917], [37.7756937, -122.4164554], 
        [37.775766, -122.4165239], [37.776716, -122.4153236], 
        [37.7770472, -122.415742], [37.7774969, -122.4163119], 
        [37.7775701, -122.4163507], [37.7776511, -122.4163809], 
        [37.777723, -122.416401], [37.7786552, -122.4165794], 
        [37.7786315, -122.4167642], [37.778444, -122.4182296], 
        [37.7793889, -122.4184192], [37.7801291, -122.4185677], 
        [37.7802725, -122.4186003], [37.7803918, -122.41863], 
        [37.7807733, -122.4187069], [37.781237, -122.4188004], 
        [37.7817058, -122.418895], [37.7821696, -122.4189885], 
        [37.7830967, -122.4191755], [37.7835683, -122.4192706], 
        [37.7840291, -122.4193635], [37.784236, -122.417707], 
        [37.78471, -122.417806], [37.7851734, -122.4179023], 
        [37.785642, -122.417996], [37.786101, -122.418088], 
        [37.7858929, -122.4197394], [37.7863848, -122.4198365], 
        [37.7868291, -122.4199282], [37.7870394, -122.4182713], 
        [37.787202, -122.4169902], [37.7872465, -122.4166393], 
        [37.7874552, -122.4149952], [37.7876635, -122.4133539], 
        [37.7877436, -122.412723], [37.7877665, -122.4125426], 
        [37.787793, -122.4123333], [37.7878735, -122.4116993], 
        [37.7881515, -122.4117557], [37.78848, -122.411819], 
        [37.788808, -122.411886], [37.788861, -122.41158459999997]
    ];
    console.log(stops);

    var nodeList = [];
    
    for (var j = 0; j < stops.length; j++) {
        point = new window.google.maps.LatLng(stops[j][0], stops[j][1]);
        nodeList.push(point);
    }

    routeLine = new google.maps.Polyline({
        path: nodeList,
        strokeColor: "#ff620c",
        strokeWeight: 7,
        strokeOpacity: .75 
    });

    startMarker = new google.maps.Marker({
        position: new window.google.maps.LatLng(stops[0][0], stops[0][1]),
        map: map
    });

    var bounds = new google.maps.LatLngBounds();
    for (var i = 0; i < nodeList.length; i++) {
        bounds.extend(nodeList[i]);
    }

    routeLine.setMap(map);
    map.fitBounds(bounds);

}


function clearRoute() {
    // clears route and marker if user clicks to get a new route without refreshing page

    routeLine.setMap(null);
    startMarker.setMap(null);

}
